<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>DashBoard Pages</title>
  
  <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet"
    integrity="sha384-QWTKZyjpPEjISv5WaRU9OFeRpok6YctnYmDr5pNlyT2bRjXh0JMhjY6hW+ALEwIH" crossorigin="anonymous">

  <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.15.1/css/all.min.css" rel="stylesheet">
  <link href="https://cdn.jsdelivr.net/npm/quill@2.0.0-rc.2/dist/quill.snow.css" rel="stylesheet" />
  <style>
   
    .sidebar {
      height: 100%;
      width: 80px;
      position: fixed;
      top: 0;
      left: 0;
      background-color: #fff;
      padding-top: 20px;
      /* overflow-x: hidden; */
    }

    .sidebar img {
      padding: 10px;
      text-align: center;
      text-decoration: none;
      color: #fff;
      display: block;
    }

    .sidebar img:hover {
      background-color: rgb(229, 234, 242);
    }

    .bottom-icons {
      position: absolute;
      bottom: 20px;
      left: 10px;
    }

    .bottom-icons img {
      margin-bottom: 10px;
    }

    .bell {
      display: flex;
      align-items: center;
      padding: 20px;
    }

    .header {
      margin-left: 80px;
      width: 100vw;
      height: auto;
    }

    @media (max-width: 768px) {
      .sidebar {
        width: 60px;
      }

      .sidebar img {
        padding: 8px;
      }

      .bottom-icons img {
        width: 30px;
        height: 30px;
      }
    }
  </style>
</head>

<body>

  <div class="d-flex overflow-hidden">
    <div class="justify-content-between sidebar border border-thick">
      <!-- Icons at the top -->
      <img class="m-2" src="icons/logo.svg" alt="">
      <a href="http://localhost:3000/allBlogs"><img class="m-2" src="icons/dashboard.svg" alt=""></a>
      <a href="http://localhost:3000/pages"><img class="m-2" src="icons/library.svg" alt=""></a>

      <!-- Icons at the bottom -->
      <div class="bottom-icons ">
        <img class="m-2" src="icons/bell.svg">
        <img class="" src="icons/avatar.svg">
      </div>
    </div>
    <div>
      <div class="border header">
        <nav class="ms-3 navbar navbar-expand-lg navbar-light">
          <a href="http://localhost:3000/dash"><img src="icons/Union2.svg" alt=""></a>
          <a class="navbar-brand m-2" href="#">Home Page</a>
          <img class="mt-2" style="margin-left: 60%;" alt="">
          <button type="button" id="preview" class="mt-2 btn btn-light px-4 ms-2" onclick="">Preview</button>
          <button type="button" id="save" class="mt-2 btn btn-success px-4 ms-2">Save</button>

          <button type="button" class="mt-2 btn btn-primary px-4 ms-2" data-bs-toggle="modal"
            data-bs-target="#exampleModal">
            Publish
          </button>
        </nav>

      </div>
      <div class="d-flex" style="width: 25rem;">
        <div class="mt-3 header" style=" margin-left: 7rem; margin-right: 2rem;">
          <form action="/blog" method="POST" style="width:85rem" class="d-flex" enctype="multipart/form-data">
            <div class="me-5" style="width: 120rem;">
              <input type="hidden" id="save_input" name="save_input" value="2">
              <label for="titl">Title:</label><br>
              <input type="text" style="width: 70rem;" id="title" name="title" required><br>

              <label for="subtitle">Subtitle:</label><br>
              <input type="text" id="subtitle" style="width: 70rem;" name="subtitle"><br>
              <label for="body">Body:</label><br>
              <!-- <textarea id="body" name="body" rows="4" required></textarea><br>  -->
              <div id="editor" style="height: 10rem;">

              </div>
              <input type="hidden" id="editorContent" name="editorContent">
              <div class="container">
                <table class="m-5" style="opacity: 0.6;">
                  <tr>
                    <td><img
                        src="https://images.unsplash.com/photo-1710599901865-0506a7cf062e?w=200&auto=format&fit=crop&q=60&ixlib=rb-4.0.3&ixid=M3wxMjA3fDB8MHx0b3BpYy1mZWVkfDExfGJvOGpRS1RhRTBZfHxlbnwwfHx8fHw%3D"></img>
                    </td>
                    <td><img
                        src="https://images.unsplash.com/photo-1710599901865-0506a7cf062e?w=200&auto=format&fit=crop&q=60&ixlib=rb-4.0.3&ixid=M3wxMjA3fDB8MHx0b3BpYy1mZWVkfDExfGJvOGpRS1RhRTBZfHxlbnwwfHx8fHw%3D"></img>
                    </td>
                    <td><img
                        src="https://images.unsplash.com/photo-1710599901865-0506a7cf062e?w=200&auto=format&fit=crop&q=60&ixlib=rb-4.0.3&ixid=M3wxMjA3fDB8MHx0b3BpYy1mZWVkfDExfGJvOGpRS1RhRTBZfHxlbnwwfHx8fHw%3D"></img>
                    </td>
                  </tr>
                  <tr>
                    <td><img
                        src="https://images.unsplash.com/photo-1710599901865-0506a7cf062e?w=200&auto=format&fit=crop&q=60&ixlib=rb-4.0.3&ixid=M3wxMjA3fDB8MHx0b3BpYy1mZWVkfDExfGJvOGpRS1RhRTBZfHxlbnwwfHx8fHw%3D"></img>
                    </td>
                    <td><img
                        src="https://images.unsplash.com/photo-1710599901865-0506a7cf062e?w=200&auto=format&fit=crop&q=60&ixlib=rb-4.0.3&ixid=M3wxMjA3fDB8MHx0b3BpYy1mZWVkfDExfGJvOGpRS1RhRTBZfHxlbnwwfHx8fHw%3D"></img>
                    </td>
                    <td><img
                        src="https://plus.unsplash.com/premium_photo-1683133759267-1ee919c616d6?w=200&auto=format&fit=crop&q=60&ixlib=rb-4.0.3&ixid=M3wxMjA3fDB8MHxzZWFyY2h8MXx8c3F1YXJlJTIwc2hhcGV8ZW58MHx8MHx8fDA%3D"></img>
                    </td>
                  </tr>
                </table>
                <label for="file" class="me-3">Select a file:</label>
                <input type="file" id="attachment" name="attachment" class="mt-4" required>
              </div>
            </div>
            <div class="border p-5">
              <p>Generated URL: /blog/<span id="urlPlaceholder"></span></p>
              <input type="hidden" id="url" name="url" value="">
             
              <label for="author">Author:</label><br>
              <input type="text" id="author" name="author"><br>

              <!-- Button trigger modal -->


              <!-- Modal -->
              <div class="modal fade" id="exampleModal" tabindex="-1" aria-labelledby="exampleModalLabel"
                aria-hidden="true">
                <div class="modal-dialog">
                  <div class="modal-content">
                    <div class="modal-header bg-dark text-light">
                      <h1 class="modal-title fs-5" id="exampleModalLabel">Publish Page</h1>
                      <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
                    </div>
                    <div class="modal-body m-3" style="display: block;">
                      <label for="date">Date:</label>
                      <input class="me-5" type="date" id="date" name="date">
                      <label for="time">Select a time:</label>
                      <input type="time" id="time" name="time">
                    </div>
                    <div class="modal-footer">
                      <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">Close</button>
                      <button type="button" class="btn btn-primary" id="publish">Publish</button>
                    </div>
                  </div>
                </div>
              </div>

              <!-- <button type="submit">Publish</button> -->

            </div>

          </form>
          <script src="https://cdn.jsdelivr.net/npm/quill@2.0.0-rc.2/dist/quill.js"></script>

        </div>

      </div>


    </div>


  </div>


  <script>

    const quill = new Quill("#editor", {
      theme: "snow",
      modules: {
        toolbar: [
          [{ header: "1" }, { header: "2" }, { font: [] }],
          [{ size: [] }],
          ["bold", "italic", "underline", "strike", "blockquote"],
          [
            { list: "ordered" },
            { list: "bullet" },
            { indent: "-1" },
            { indent: "+1" },
          ],
          ["link", "image"],
          ["clean"],
        ],
      },
    });

    document.getElementById('title').addEventListener('input', function () {
      const title = this.value;
      const urlPlaceholder = document.getElementById('urlPlaceholder');
      const url = document.getElementById('url');

      const slug = title.trim().toLowerCase().replace(/\s+/g, '-');
      urlPlaceholder.textContent = slug;
      url.value ="http://localhost:3000/blog/"+slug;
    });




    let save = document.getElementById('save_input')
    let save_button = document.getElementById('save')
    let publish = document.getElementById('publish')

    save_button.onclick = () => {
      const title = document.getElementById('title');
      title.value = title.value.trim();
      const editorContent = document.querySelector('.ql-editor').innerHTML;
      document.getElementById('editorContent').value = editorContent;
      save.value = "1";
      document.querySelector('form').submit();
    }

    publish.onclick = () => {
      const title = document.getElementById('title');
      title.value = title.value.trim();
      const editorContent = document.querySelector('.ql-editor').innerHTML;
      document.getElementById('editorContent').value = editorContent;
      document.querySelector('form').submit();
    }

    // save.onclick = () => {
    //   const title = document.getElementById('title');
    //   title.value = title.value.trim();
    //   const editorContent = document.querySelector('.ql-editor').innerHTML;
    //   document.getElementById('editorContent').value = editorContent;
    //   document.querySelector('form').submit();
    // }

  </script>

  <!-- Bootstrap JS and Font Awesome JS -->
  <script src="https://cdn.jsdelivr.net/npm/quill@2.0.0-rc.2/dist/quill.js"></script>
  <script src="https://code.jquery.com/jquery-3.5.1.slim.min.js"></script>
  <script src="https://cdn.jsdelivr.net/npm/@popperjs/core@2.5.4/dist/umd/popper.min.js"></script>
  <script src="https://stackpath.bootstrapcdn.com/bootstrap/4.5.2/js/bootstrap.min.js"></script>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.15.1/js/all.min.js"></script>
  <script src="https://cdn.jsdelivr.net/npm/@popperjs/core@2.11.8/dist/umd/popper.min.js"
    integrity="sha384-I7E8VVD/ismYTF4hNIPjVp/Zjvgyol6VFvRkX/vR+Vc4jQkC+hVqc2pM8ODewa9r"
    crossorigin="anonymous"></script>
  <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/js/bootstrap.min.js"
    integrity="sha384-0pUGZvbkm6XF6gxjEnlmuGrJXVbNuzT9qBBavbLwCsOGabYfZo0T0to5eqruptLy"
    crossorigin="anonymous"></script>
</body>

</html>